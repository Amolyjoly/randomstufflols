<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logam Mulia Antam</title>
    <style>
        body {
            display: flex;
            flex-direction: column; /* Stack items vertically */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            height: 100vh; /* Full height of the viewport */
            margin: 0; /* Remove default margin */
            font-family: Arial, sans-serif; /* Set font style */
            background-color: #f4f4f4; /* Background color */
        }
        .container {
            text-align: center; /* Center text inside the container */
            background: white; /* Background color for the container */
            padding: 20px; /* Padding around the content */
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            margin-bottom: 20px; /* Space below the container */
        }
        .countdown {
            font-size: 1.5em; /* Larger font for countdown */
            color: #333; /* Text color */
        }
        .footer {
            font-size: 1em; /* Font size for the footer */
            color: #555; /* Lighter text color */
            margin-bottom: 10px; /* Space above the countdown */
        }
    </style>
    <script>
        let countdown; // Variable to hold the countdown timer

        // Function to format the price with commas and dots
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        // Fetches the gold prices instantly
        async function fetchGoldPrices() {
            const response = await fetch('https://logam-mulia-api.vercel.app/prices/hargaemas-com');
            const data = await response.json();

            const sellPrice = data.data[0].sell;
            const buyPrice = data.data[0].buy;

            document.getElementById('sellPrice').textContent = `Harga jual: Rp ${formatPrice(sellPrice)}`;
            document.getElementById('buyPrice').textContent = `Harga beli: Rp ${formatPrice(buyPrice)}`;
        }

        // Function to start the countdown for refreshing the price every hour
        function startCountdown(duration) {
            let timer = duration, minutes, seconds;
            countdown = setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                // Add leading zero to seconds
                seconds = seconds < 10 ? "0" + seconds : seconds;

                document.getElementById('countdown').textContent = `${minutes}:${seconds}`;

                // When the timer reaches zero
                if (--timer < 0) {
                    clearInterval(countdown); // Stop the countdown
                    fetchGoldPrices(); // Fetch new prices
                    startCountdown(3600); // Restart the countdown for 1 hour
                }
            }, 1000); // Update every second
        }

        window.onload = function () {
            fetchGoldPrices(); // Fetch initial prices immediately
            startCountdown(3600); // Start countdown for 1 hour (3600 seconds)
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>Emas Logam Mulia Antam</h1>
        <p id="sellPrice">Harga jual: </p>
        <p id="buyPrice">Harga beli: </p>
    </div>
    <div class="footer">Made by Alif</div> <!-- Added footer with text -->
    <div class="countdown" id="countdown">60:00</div>
</body>
</html>
